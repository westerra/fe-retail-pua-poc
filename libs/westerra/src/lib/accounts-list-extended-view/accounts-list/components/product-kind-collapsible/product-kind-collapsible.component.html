<div *ngIf="productKind" class="bb-product-kind card card-body">
  <div
    role="button"
    tabindex="0"
    [attr.aria-expanded]="!isExpanded"
    class="bb-product-kind__header"
    data-role="expand-button"
    [class.bb-product-kind__header--collapsed]="isExpanded"
    (bbKeyboardClick)="toggleExpanded()"
  >
    <div class="bb-product-kind__title">
      <bb-icon-ui
        [attr.data-role]="iconName"
        *ngIf="showIcons && iconName"
        [name]="iconName"
        class="bb-product-kind__title-icon"
      >
      </bb-icon-ui>

      <bb-ellipsis-ui
        data-role="product-kind-name"
        [text]="getProductKindName(productKind.products[0] | bbGetProductKind)"
        tooltipTriggers="hover focus"
      ></bb-ellipsis-ui>
    </div>
    <div class="bb-product-kind__balance">
      <ng-container *ngIf="productKind.aggregatedBalance | bbIsDefined">
        <span class="bb-stack bb-product-kind__balance-block">
          <span
            class="bb-product-kind__balance-title bb-stack__item bb-stack__item--spacing-sm"
            i18n="
              Total label|Label for a product summary widget total label component@@product-summary-total.label.total"
          >
            Total
          </span>
          <bb-amount-ui
            class="bb-stack__item"
            data-role="current-account-total-amount"
            [currency]="productKind.currency ?? ''"
            [amount]="productKind.aggregatedBalance!"
          ></bb-amount-ui>
        </span>
      </ng-container>
      <bb-icon-ui class="bb-product-kind__balance-icon" name="toggle-{{ !isExpanded ? 'up' : 'down' }}"></bb-icon-ui>
    </div>
  </div>

  <div class="bb-product-kind__item-group" [ngbCollapse]="isExpanded">
    <div class="bb-product-kind__item bb-list__item" *ngFor="let item of productKind?.products">
      <bb-product-kind
        [item]="item"
        [showLogo]="showLogo"
        (selectProductKind)="selectProduct.emit(item); onSelectAccount($event.id ?? '')"
      ></bb-product-kind>
    </div>
  </div>
</div>
